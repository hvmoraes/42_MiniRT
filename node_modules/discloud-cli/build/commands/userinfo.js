"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const v2_1 = require("@discloudapp/api-types/v2");
const util_1 = require("../util");
exports.default = {
    name: "userinfo",
    description: "View your Discloud user information.",
    alias: ["ui", "uinfo"],
    async run(toolbox) {
        const { print } = toolbox;
        if (util_1.RateLimit.isLimited)
            return print.error(`Rate limited until: ${util_1.RateLimit.limited}`);
        const apiRes = await util_1.apidiscloud.get(v2_1.Routes.user());
        new util_1.RateLimit(apiRes.headers);
        print.printApiRes(apiRes, { exitOnError: true });
        if (!apiRes.data)
            return;
        if ("user" in apiRes.data)
            print.table((0, util_1.makeTable)(apiRes.data.user), {
                format: "lean",
            });
    },
};
