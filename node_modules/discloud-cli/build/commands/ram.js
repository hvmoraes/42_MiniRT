"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const v2_1 = require("@discloudapp/api-types/v2");
const util_1 = require("../util");
exports.default = {
    name: "ram",
    description: "Set amount of ram for your app.",
    async run(toolbox) {
        const { parameters, print } = toolbox;
        if (!util_1.config.data.token)
            return print.error("Please use login command before using this command.");
        if (util_1.RateLimit.isLimited)
            return print.error(`Rate limited until: ${util_1.RateLimit.limited}`);
        const appId = parameters.first;
        if (!appId)
            return print.error("Usage: discloud ram APP_ID RAM_AMOUNT");
        const ram = parameters.second;
        if (!ram)
            return print.error("Need RAM parameter.");
        const ramInt = parseInt(ram);
        if (isNaN(ramInt))
            return print.error("RAM must to be of type integer.");
        if (ramInt < 100)
            return print.error("RAM must be a value equal to or above 100MB.");
        const spin = print.spin({
            text: print.colors.cyan("Changing amount of RAM..."),
        });
        const apiRes = await util_1.apidiscloud.put(v2_1.Routes.appRam(appId), {
            ramMB: ramInt,
        });
        new util_1.RateLimit(apiRes.headers);
        print.spinApiRes(apiRes, spin);
    },
};
