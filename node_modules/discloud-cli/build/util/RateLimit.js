"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.RateLimit = void 0;
const _1 = require(".");
class RateLimit {
    constructor(headers) {
        this.limit(headers);
    }
    static get limited() {
        return Intl.DateTimeFormat([], { dateStyle: "short", timeStyle: "medium" })
            .format(new Date(_1.config.data.limited));
    }
    static get isLimited() {
        return new Date(_1.config.data.limited) >= new Date();
    }
    limit(headers) {
        if (!headers)
            return;
        const remaining = Number(headers["ratelimit-remaining"]);
        if (isNaN(remaining))
            return;
        if (remaining > 0)
            return;
        _1.config.update({ limited: Date.now() + (Number(headers["ratelimit-reset"]) * 1000) });
    }
}
exports.RateLimit = RateLimit;
